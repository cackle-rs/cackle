[common]
version = 1
features = [
    "crash-if-not-sandboxed",
    "foo",
]
import_std = [
    "fs",
    "env",
    "net",
    "process",
    "terminate",
]

[sandbox]
kind = "Bubblewrap"

[pkg.crab1]
allow_unsafe = true
import = [
    "fs",
]

[pkg.crab2]
allow_apis = [
    "env",
    "fs",
]

[pkg.crab2.build]
allow_apis = [
    "process",
    "env",
    "fs",
]
allow_build_instructions = [
    "cargo:rustc-link-*"
]
allow_unsafe = true

[pkg.crab3]
allow_unsafe = true
allow_apis = [
    "terminate",
    # Code in a file that's generated by build.rs.
    "env",
    "crab1::fs",
]

[pkg.crab3.build]
allow_apis = [
    "env",
    "fs",
]

[pkg.pmacro1]
allow_apis = [
    "env",
]
allow_proc_macro = true

[pkg.crab-bin]
allow_apis = [
   "fs",
]
allow_unsafe = true

[pkg.crab-bin.build]
allow_apis = [
    "fs",
]

[pkg.crab-bin.build.sandbox]
kind = "Disabled"

[pkg.crab4]
allow_apis = [
    "fs",
]
allow_unsafe = true

[pkg.crab4.build]
allow_apis = [
    "env",
]

[pkg.crab5]
allow_apis = [
    "fs",
]

[pkg.crab1.build.sandbox]
allow_network = true
